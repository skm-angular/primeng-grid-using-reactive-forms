<div class="card">
  <h5>Cell Editing</h5>
  <form [formGroup]="fg">
    <p-table [value]="rows.controls" dataKey="id">
      <ng-template pTemplate="header">
        <tr>
          <th
            *ngFor="let header of headers"
            [pTooltip]="header.pTooltip ? header.pTooltip : header.header"
            [tooltipPosition]="
              header.tooltipPosition ? header.tooltipPosition : 'bottom'
            "
          >
            {{ header.header }}
          </th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-rowData let-rowIndex="rowIndex">
        <ng-container formArrayName="rows">
          <tr [formGroupName]="rowIndex">
            <ng-container *ngFor="let header of headers">
              <ng-container [ngSwitch]="header.controlType">
                <td pEditableColumn *ngSwitchCase="'textEdit'">
                  <p-cellEditor>
                    <ng-template pTemplate="input">
                      <input
                        pInputText
                        type="text"
                        [formControlName]="header.controlName"
                      />
                    </ng-template>
                    <ng-template pTemplate="output">
                      {{ rowData.get(header.controlName).value }}
                    </ng-template>
                  </p-cellEditor>
                </td>
                <td *ngSwitchDefault>
                  {{ rowData.get(header.controlName).value }}
                </td>
                <td>
                  <button
                    type="button"
                    class="btn btn-default"
                    title="Delete"
                    (click)="onDeleteRow(rowIndex)"
                  >
                    <i class="fa fa-trash-o" aria-hidden="true"></i>
                    Delete
                  </button>
                </td>
              </ng-container>
            </ng-container>
          </tr>
        </ng-container>
      </ng-template>
    </p-table>
  </form>
  <div class="card-footer">
    <button
      type="button"
      class="btn btn-primary btn-sm pull-left"
      (click)="addNewRow()"
    >
      Add Row
    </button>
    <button
      type="button"
      class="btn btn-success btn-sm pull-right"
      title="Save"
      (click)="save()"
    >
      Save
    </button>
  </div>
</div>
